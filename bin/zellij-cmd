#!/bin/bash

if [ $# -eq 0 ]; then
    echo "Usage: zellij-cmd <command>"
    exit 1
fi

cmd="$1"
dir_name="${PWD##*/}"
session_name="${dir_name}-${cmd}"
# Sanitize session name for zellij (replace / and : with -)
session_name="${session_name//\//-}"
session_name="${session_name//:/--}"

if zellij list-sessions 2>/dev/null | grep -q "^${session_name}$"; then
    zellij attach "$session_name"
else
    zellij --session "$session_name"
fi
